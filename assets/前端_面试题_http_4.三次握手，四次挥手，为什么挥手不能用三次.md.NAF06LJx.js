import{_ as a,a as e,o as l,aR as i}from"./chunks/framework.Dl98zJwX.js";const k=JSON.parse('{"title":"三次握手，四次挥手，为什么挥手不能用三次","description":"","frontmatter":{},"headers":[],"relativePath":"前端/面试题/http/4.三次握手，四次挥手，为什么挥手不能用三次.md","filePath":"前端/面试题/http/4.三次握手，四次挥手，为什么挥手不能用三次.md","lastUpdated":1721110996000}'),t={name:"前端/面试题/http/4.三次握手，四次挥手，为什么挥手不能用三次.md"},r=i('<h1 id="三次握手-四次挥手-为什么挥手不能用三次" tabindex="-1">三次握手，四次挥手，为什么挥手不能用三次 <a class="header-anchor" href="#三次握手-四次挥手-为什么挥手不能用三次" aria-label="Permalink to &quot;三次握手，四次挥手，为什么挥手不能用三次&quot;">​</a></h1><h2 id="三次握手" tabindex="-1">三次握手 <a class="header-anchor" href="#三次握手" aria-label="Permalink to &quot;三次握手&quot;">​</a></h2><p>确认双方能够互相通信，确认双方收发能力</p><ul><li>客户端发送握手请求 seq = 0</li><li>服务器回复 seq = 0; ack = 1 (客户端请求 seq+1)</li><li>客户端回复 seq = 1(服务器的 ack) ack = 1(服务器上一个 seq+1);</li></ul><p>ack = 上一次 seq + len (数据长度); seq = 上一次 ack</p><h2 id="四次挥手" tabindex="-1">四次挥手 <a class="header-anchor" href="#四次挥手" aria-label="Permalink to &quot;四次挥手&quot;">​</a></h2><ul><li>客户端发送请求，我要断开链接 FIN, 发送数据 seq = x+1 ack</li><li>服务器回复，确认收到断开请求 ack: x+1+1</li><li>服务器发送 FIN, 表示也要断开请求 seq = y+1</li><li>客户端回复一个: ack: y+1+1</li></ul><p>服务器关闭是一个异步过程，需要先回复收到断开请求，然后等待服务器关闭后，发送断开请求信号 FIN 服务器关闭断开还有一些数据没有发送完</p><h2 id="四次挥手最后一次-客户端发送-time-wait-为什么等一会-close" tabindex="-1">四次挥手最后一次，客户端发送 TIME_WAIT, 为什么等一会 CLOSE <a class="header-anchor" href="#四次挥手最后一次-客户端发送-time-wait-为什么等一会-close" aria-label="Permalink to &quot;四次挥手最后一次，客户端发送 TIME_WAIT, 为什么等一会 CLOSE&quot;">​</a></h2><ul><li>客户端发送： ack 收到断开请求，服务器可能没收到 ack, 若没收到，服务器会再次发送 FIN 断开请求信号，故客户端会等一会 close</li></ul><h2 id="三次握手四次挥手带长度" tabindex="-1">三次握手四次挥手带长度 <a class="header-anchor" href="#三次握手四次挥手带长度" aria-label="Permalink to &quot;三次握手四次挥手带长度&quot;">​</a></h2><h3 id="握手" tabindex="-1">握手 <a class="header-anchor" href="#握手" aria-label="Permalink to &quot;握手&quot;">​</a></h3><ul><li>client PUSH_ACK 发送 seq = 1 ack = 1 len = 5</li><li>server ACK 确认 seq = 1; ack = 6 ;</li><li>server PUSH_ACK 发送 seq = 1; ack = 6 len = 2;</li><li>client ACK seq = 6; ack = 3</li></ul><h3 id="挥手" tabindex="-1">挥手 <a class="header-anchor" href="#挥手" aria-label="Permalink to &quot;挥手&quot;">​</a></h3><ul><li>client FIN seq = 6; ack = 3;</li><li>server ACK seq = 3; ack = 6 + 1;</li><li>server FIN seq = 3; ack = 6 + 1;</li><li>client ACK seq = 7; ack = 3 + 1;</li><li>time_wait</li><li>close</li></ul>',15),s=[r];function c(o,_,n,h,d,q){return l(),e("div",null,s)}const p=a(t,[["render",c]]);export{k as __pageData,p as default};
