# CDN 理解，有 CDN 和没有 CDN 区别

CDN 是将源站内容分发至最接近用户的节点，使用户可就近取得所需内容，提高用户访问的响应速度和成功率。
解决因分布、带宽、服务器性能带来的访问延迟问题，适用于站点加速、点播、直播等场景。

最简单的 CDN 网络是由，一台 DNS 服务和几台缓存服务器组成的

- 访 问 URL,DNS 系统会将域名解析权交给 CNAME 指向的的 专有 DNS 服务器
- cdn 的 专有 dns 服务 将全局负载均衡设备 ip 返回给用户
- 用户向 CDN 全局负载均衡设备发起内容 URL 访问请求

- CDN 全局负载均衡会根据 IP 和内容，选择一台用户所属区域的区域负载均衡，告诉用户向这台设备发送请求
- 区域负载均衡设备会根据用户 IP，判断哪一台距离用户最近，选择一台合适的缓存服务器提供服务，区域负载均衡设备会向全局负载均衡设备返回一台缓存服务的 ip 地址
- 全局负载均衡设备把服务器 ip 地址发送给用户
- 用户向缓存服务器发送请求，缓存服务器响应用户请求，如果这台缓存服务器上并没有用户想要的内容，而区域均衡设备依然将它分配给了用户，那么这台服务器就要向它的上一级缓存服务器请求内容，直至追溯到网站的源服务器将内容拉到本地。

# 精简

访问 URL，DNS 系统会将域名解析权交给 CNAME 指向的专有 DNS 服务，它会返回全局负载均衡设备 ip 给用户
用户向全局负载均衡设备发送内容请求
CDN 全局负载均衡会根据 ip，选择一台用户所属区域的区域负载均衡设备，区域负载均衡根据用户 IP，判断那一台距离用户最近，选择一台合适的缓存服务器提供服务，返回缓存服务器 ip
用户向缓存服务器发送请求，缓存服务器相应用户请求，如果这台服务器上并没有用户所需要的内容，这台服务器就要像它的上一级查找，直到追溯到网站的源服务器，将内容拉到本地

# CDN 如何实现就近访问？