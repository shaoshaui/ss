<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>iframe 点击劫持的介绍 | 一叶知秋的博客</title>
    <meta name="description" content="山不向我走来，我便向他走去。前端开发为主的博客网站。">
    <meta name="generator" content="VitePress v1.1.4">
    <link rel="preload stylesheet" href="/ss/assets/style.BBClWnI0.css" as="style">
    
    <script type="module" src="/ss/assets/app.DUafOD1b.js"></script>
    <link rel="preload" href="/ss/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/ss/assets/chunks/theme.Csh2d1QL.js">
    <link rel="modulepreload" href="/ss/assets/chunks/framework.Dl98zJwX.js">
    <link rel="modulepreload" href="/ss/assets/前端_面试题_浏览器_3.安全.md.D5p-V7S8.lean.js">
    <link rel="icon" href="/ss/logo.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-fdc0db66><!--[--><!--]--><!--[--><span tabindex="-1" data-v-3edb4aea></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-3edb4aea> Skip to content </a><!--]--><!----><header class="VPNav" data-v-fdc0db66 data-v-8a114e15><div class="VPNavBar top" data-v-8a114e15 data-v-3c2fc086><div class="wrapper" data-v-3c2fc086><div class="container" data-v-3c2fc086><div class="title" data-v-3c2fc086><div class="VPNavBarTitle" data-v-3c2fc086 data-v-73ac8152><a class="title" href="/ss/" data-v-73ac8152><!--[--><!--]--><!--[--><img class="VPImage logo" src="/ss/ss/logo.png" alt data-v-40bed588><!--]--><!----><!--[--><!--]--></a></div></div><div class="content" data-v-3c2fc086><div class="content-body" data-v-3c2fc086><!--[--><!--]--><div class="VPNavBarSearch search" data-v-3c2fc086><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-3c2fc086 data-v-416535fc><span id="main-nav-aria-label" class="visually-hidden" data-v-416535fc>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/ss/site/framework.html" tabindex="0" data-v-416535fc data-v-f833e0cf><!--[--><span data-v-f833e0cf>导航</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-416535fc data-v-290a0f2b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-290a0f2b><span class="text" data-v-290a0f2b><!----><span data-v-290a0f2b>前端</span><span class="vpi-chevron-down text-icon" data-v-290a0f2b></span></span></button><div class="menu" data-v-290a0f2b><div class="VPMenu" data-v-290a0f2b data-v-42739e96><div class="items" data-v-42739e96><!--[--><!--[--><div class="VPMenuLink" data-v-42739e96 data-v-8d9fe640><a class="VPLink link" href="/ss/%E5%89%8D%E7%AB%AF/%E8%BD%AF%E6%8A%80%E8%83%BD/%E9%A1%B9%E7%9B%AE%E4%B8%BBR%E5%85%A8%E5%8E%86%E7%A8%8B%E6%80%BB%E7%BB%93%E5%92%8C%E5%8F%8D%E6%80%9D.html" data-v-8d9fe640><!--[-->软技能<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-42739e96 data-v-8d9fe640><a class="VPLink link" href="/ss/%E5%89%8D%E7%AB%AF/%E9%9D%A2%E8%AF%95%E9%A2%98/%E9%A2%98%E7%9B%AE.html" data-v-8d9fe640><!--[-->面试题<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-416535fc data-v-290a0f2b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-290a0f2b><span class="text" data-v-290a0f2b><!----><span data-v-290a0f2b>成长</span><span class="vpi-chevron-down text-icon" data-v-290a0f2b></span></span></button><div class="menu" data-v-290a0f2b><div class="VPMenu" data-v-290a0f2b data-v-42739e96><div class="items" data-v-42739e96><!--[--><!--[--><div class="VPMenuLink" data-v-42739e96 data-v-8d9fe640><a class="VPLink link" href="/ss/%E6%88%90%E9%95%BF/%E4%B9%A6%E7%B1%8D/%E4%BA%BA%E7%89%A9%E4%BC%A0%E8%AE%B0/%E6%9B%BE%E5%9B%BD%E8%97%A9%E5%AE%B6%E4%B9%A6.html" data-v-8d9fe640><!--[-->书籍<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-42739e96 data-v-8d9fe640><a class="VPLink link" href="/ss/%E6%88%90%E9%95%BF/%E8%A7%84%E5%BE%8B/index.html" data-v-8d9fe640><!--[-->规律<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-42739e96 data-v-8d9fe640><a class="VPLink link" href="/ss/%E6%88%90%E9%95%BF/%E5%8F%8D%E6%80%9D/%E6%81%92.html" data-v-8d9fe640><!--[-->反思<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-42739e96 data-v-8d9fe640><a class="VPLink link" href="/ss/%E6%88%90%E9%95%BF/%E6%80%9D%E7%BB%B4/%E7%8B%AC%E7%AB%8B%E6%80%9D%E8%80%83.html" data-v-8d9fe640><!--[-->思维<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/ss/guide/pdf.html" tabindex="0" data-v-416535fc data-v-f833e0cf><!--[--><span data-v-f833e0cf>我的简历</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://juejin.cn/user/2418581313700014/posts" target="_blank" rel="noreferrer" tabindex="0" data-v-416535fc data-v-f833e0cf><!--[--><span data-v-f833e0cf>我的掘金</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://www.yuque.com/qifengle-4eyb1/lmp4mm" target="_blank" rel="noreferrer" tabindex="0" data-v-416535fc data-v-f833e0cf><!--[--><span data-v-f833e0cf>技术博客</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-416535fc data-v-290a0f2b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-290a0f2b><span class="text" data-v-290a0f2b><!----><span data-v-290a0f2b>我的工具</span><span class="vpi-chevron-down text-icon" data-v-290a0f2b></span></span></button><div class="menu" data-v-290a0f2b><div class="VPMenu" data-v-290a0f2b data-v-42739e96><div class="items" data-v-42739e96><!--[--><!--[--><div class="VPMenuLink" data-v-42739e96 data-v-8d9fe640><a class="VPLink link vp-external-link-icon" href="https://tinypng.com/" target="_blank" rel="noreferrer" data-v-8d9fe640><!--[-->图片压缩<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-42739e96 data-v-8d9fe640><a class="VPLink link vp-external-link-icon" href="https://www.chaonengso.com/" target="_blank" rel="noreferrer" data-v-8d9fe640><!--[-->网盘资源搜索<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-42739e96 data-v-8d9fe640><a class="VPLink link vp-external-link-icon" href="https://pdftoword.55.la/imgcompress/" target="_blank" rel="noreferrer" data-v-8d9fe640><!--[-->文件格式转换<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/ss/me/" tabindex="0" data-v-416535fc data-v-f833e0cf><!--[--><span data-v-f833e0cf>关于</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-3c2fc086 data-v-61931bdf><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-61931bdf data-v-4c3f92a0 data-v-4a9b4d6a><span class="check" data-v-4a9b4d6a><span class="icon" data-v-4a9b4d6a><!--[--><span class="vpi-sun sun" data-v-4c3f92a0></span><span class="vpi-moon moon" data-v-4c3f92a0></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-3c2fc086 data-v-b0313d44 data-v-7a777309><!--[--><a class="VPSocialLink no-icon" href="https://github.com/shaoshaui?tab=repositories" aria-label="github" target="_blank" rel="noopener" data-v-7a777309 data-v-a5648210><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-3c2fc086 data-v-93dee7b9 data-v-290a0f2b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-290a0f2b><span class="vpi-more-horizontal icon" data-v-290a0f2b></span></button><div class="menu" data-v-290a0f2b><div class="VPMenu" data-v-290a0f2b data-v-42739e96><!----><!--[--><!--[--><!----><div class="group" data-v-93dee7b9><div class="item appearance" data-v-93dee7b9><p class="label" data-v-93dee7b9>Appearance</p><div class="appearance-action" data-v-93dee7b9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-93dee7b9 data-v-4c3f92a0 data-v-4a9b4d6a><span class="check" data-v-4a9b4d6a><span class="icon" data-v-4a9b4d6a><!--[--><span class="vpi-sun sun" data-v-4c3f92a0></span><span class="vpi-moon moon" data-v-4c3f92a0></span><!--]--></span></span></button></div></div></div><div class="group" data-v-93dee7b9><div class="item social-links" data-v-93dee7b9><div class="VPSocialLinks social-links-list" data-v-93dee7b9 data-v-7a777309><!--[--><a class="VPSocialLink no-icon" href="https://github.com/shaoshaui?tab=repositories" aria-label="github" target="_blank" rel="noopener" data-v-7a777309 data-v-a5648210><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-3c2fc086 data-v-cab89e73><span class="container" data-v-cab89e73><span class="top" data-v-cab89e73></span><span class="middle" data-v-cab89e73></span><span class="bottom" data-v-cab89e73></span></span></button></div></div></div></div><div class="divider" data-v-3c2fc086><div class="divider-line" data-v-3c2fc086></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-fdc0db66 data-v-accf074f><div class="container" data-v-accf074f><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-accf074f data-v-96d852b2><button data-v-96d852b2>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-fdc0db66 data-v-11ef8424><div class="VPDoc has-aside" data-v-11ef8424 data-v-e2ad733b><!--[--><!--]--><div class="container" data-v-e2ad733b><div class="aside" data-v-e2ad733b><div class="aside-curtain" data-v-e2ad733b></div><div class="aside-container" data-v-e2ad733b><div class="aside-content" data-v-e2ad733b><div class="VPDocAside" data-v-e2ad733b data-v-65c39d27><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" role="navigation" data-v-65c39d27 data-v-39dca9b4><div class="content" data-v-39dca9b4><div class="outline-marker" data-v-39dca9b4></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-39dca9b4>本页目录</div><ul class="VPDocOutlineItem root" data-v-39dca9b4 data-v-894934d2><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-65c39d27></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e2ad733b><div class="content-container" data-v-e2ad733b><!--[--><!--]--><main class="main" data-v-e2ad733b><div style="position:relative;" class="vp-doc _ss_%E5%89%8D%E7%AB%AF_%E9%9D%A2%E8%AF%95%E9%A2%98_%E6%B5%8F%E8%A7%88%E5%99%A8_3_%E5%AE%89%E5%85%A8" data-v-e2ad733b><div><h3 id="web-安全" tabindex="-1">Web 安全 <a class="header-anchor" href="#web-安全" aria-label="Permalink to &quot;Web 安全&quot;">​</a></h3><p>1：XSS XSS Cross Site Script 跨站脚本攻击 2：CSRF Cross site Request Forgery 跨站请求伪造 3：Cookies 4：点击劫持 5：传输安全 6：密码安全 7：接入层注入问题 8：接入层上传问题 9：社会工程学和信息泄露 OAuth 已经授权的用户 授权会过期 数据接口可风控审计 不允许批量查询 10：其他安全问题 11：window.opener 安全问题 12：总结</p><h4 id="_1-xss" tabindex="-1">1：XSS <a class="header-anchor" href="#_1-xss" aria-label="Permalink to &quot;1：XSS&quot;">​</a></h4><ul><li><p>xss 定义</p><blockquote><p>XSS Cross Site Script 中译是跨站脚本攻击；其原本缩写是 CSS，但为了和层叠样式表(Cascading Style Sheet)有所区分，因而在安全领域叫做 XSS。</p></blockquote></li><li><p>xss 原理</p><blockquote><p>XSS 攻击是指攻击者在网站上注入恶意的客户端代码，通过恶意脚本对客户端网页进行篡改，从而在用户浏览网页时，对用户浏览器进行控制或者获取用户隐私数据的一种攻击方式。</p></blockquote></li></ul><blockquote><p>攻击者对客户端网页注入的恶意脚本一般包括 JavaScript，有时也会包含 HTML 和 Flash。有很多种方式进行 XSS 攻击，但它们的共同点为：将一些隐私数据像 cookie、session 发送给攻击者，将受害者重定向到一个由攻击者控制的网站，在受害者的机器上进行一些恶意操作。</p></blockquote><ul><li><p>xss 攻击方式 <strong>反射型</strong> domparse 定义: 反射型 XSS 只是简单地把用户输入的数据 “反射” 给浏览器，这种攻击方式往往需要攻击者诱使用户点击一个恶意链接，或者提交一个表单，或者进入一个恶意网站时，注入脚本进入被攻击者的网站。 发出请求时，出现在 url 中，服务器解析响应后, xss 代码响应内容一起传回给浏览器。最后执行在浏览器 <code>&lt;img src=&quot;null&quot; onerroe = &quot;alert(1)&quot;&gt;</code><code>&lt;p onclick=&quot;alert(&#39;aaa&#39;)&quot;&gt;&lt;/p&gt;</code><code>&lt;iframe src=&quot;//baidu.comt.html&quot;&gt;</code><strong>存储型</strong> 定义: 存储型 XSS 会把用户输入的数据 &quot;存储&quot; 在服务器端，当浏览器请求数据时，脚本从服务器上传回并执行。这种 XSS 攻击具有很强的稳定性。 差别: 差别仅在于提交代码仅在于服务器端 数据库 内存 文件 场景: 攻击者在社区或论坛上写下一篇包含恶意 JavaScript 代码的文章或评论，文章或评论发表后，所有访问该文章或评论的用户，都会在他们的浏览器中执行这段恶意的 JavaScript 代码。 <strong>基于DOM</strong> 定义: 基于 DOM 的 XSS 攻击是指通过恶意脚本修改页面的 DOM 结构，是纯粹发生在客户端的攻击。</p></li><li><p>xss 防御措施 编码 entity 编码 过滤 dom 属性 onerror style 节点，script iframe 节点 校正<br> 编码直接解码 entity dom parse 转化 校正不配对的 dom 标签 HttpOnly 最早由微软提出，至今已经成为一个标准。浏览器将禁止页面的 Javascript 访问带有 HttpOnly 属性的 Cookie。 通常 Cookie 中都包含了用户的登录凭证信息，攻击者在获取到 Cookie 之后，则可以发起 Cookie 劫持攻击。所以，严格来说，HttpOnly 并非阻止 XSS 攻击，而是能阻止 XSS 攻击后的 Cookie 劫持攻击。 输入检查 恶意表单 HTML：xss 转义 &lt; &gt; &quot;&quot; &#39;&#39; 破坏结构 页面之前必须加以 encode js:innerHTML 转义 css:expression 计算 输入检查 decodingMap</p><ul><li>&amp;符号：&quot;&amp;&quot;, &quot;&amp;&quot;</li><li>双引号：&quot;&quot;&quot;, &quot;&quot;&quot;</li><li>小于号：&quot;&lt;&quot;, &quot;&lt;&quot;</li><li>大于号：&quot;&gt;&quot;, &quot;&gt;&quot;</li><li>单引号：&quot;&#39;&quot;, &quot;&#39;&quot;</li></ul></li></ul><p>富文本： 黑名单过滤，正则表达过滤； 白名单保留部分标签和属性，只允许指定标签麻烦数据结构组装</p><h4 id="二-csrf" tabindex="-1">二：CSRF <a class="header-anchor" href="#二-csrf" aria-label="Permalink to &quot;二：CSRF&quot;">​</a></h4><blockquote><p>CSRF，即 Cross Site Request Forgery，中译是跨站请求伪造，是一种劫持受信任用户向服务器发送非预期请求的攻击方式。</p></blockquote><blockquote><p>通常情况下，CSRF 攻击是攻击者借助受害者的 Cookie 骗取服务器的信任，可以在受害者毫不知情的情况下以受害者名义伪造请求发送给受攻击服务器，从而在并未授权的情况下执行在权限保护之下的操作</p></blockquote><p>1：csrf 跨站伪造提交 post 请求 2：用户打开任意第三方网站，在新闻网站发布一条评论 网络蠕虫</p><p>场景：公共类。 服务器传递一个加密后的 token，给前台页面； 前端做提交的时候，连同这个 token 做为隐藏的字段，form 表单之后，一起提交服务器。 服务器接收请求，先检测 token 是否合法，合法就进入。 隐藏的校验问题。</p><p>CSRF 攻击原理</p><p>CSRF 攻击危害</p><ul><li>利用用户登陆状态</li><li>盗取用户资金</li><li>用户不知情</li><li>冒充用户发帖背锅</li><li>完成业务请求</li></ul><p>CSRF 防御</p><ul><li>1：在前端页面添加验证码 ccap 图形验证码</li><li>2：token</li><li>4：same-site</li><li>3：验证 referer 根据 HTTP 协议，在 HTTP 头中有一个字段叫 Referer，它记录了该 HTTP 请求的来源地址。通过 Referer Check，可以检查请求是否来自合法的&quot;源&quot;。</li><li>4：禁止来自第三方网站请求</li></ul><h4 id="三-cookies-问题" tabindex="-1">三：Cookies 问题 <a class="header-anchor" href="#三-cookies-问题" aria-label="Permalink to &quot;三：Cookies 问题&quot;">​</a></h4><p>前端数据存储 后台通过 http 头设置 document.cookie 不能覆盖增加原来值 请求时通过 http 头传给后端 前端可读性 遵守同源策略</p><p>Cookies 特性<br> 域名 有效期 路径 http-only secure {支持 https} 删除 Cookies 也是设置它的有效期 document.cookies = &quot;;expires:时间&quot;</p><p>作用： 存储个性化设置 存储未登录时用户唯一标示 存储已经登陆用户的凭证 存储其他业务数据</p><p>Cookies 登陆用户凭证 前端提交用户名和密码 后端验证用户名密码 后端 通过 http 头设置用户凭证 后续访问先验证凭证</p><pre><code>    用户ID有隐患，其他人篡改就模拟登陆
    用户ID+签名，只有自己算得出来，签名不可逆；明文透露出来；userId透露出来；重新计算
    SessionId  随机的字符串，一把钥匙找到自己信息； 存到换成数据库，不放内存；
</code></pre><p>Cookies 和 XSS 关系 1：xss 可以偷取 Cookies:偷走用户登陆态 2：http-only 的 cookie 不会被偷</p><p>Cookies 和 CSRF 关系 1：CSRF 利用了用户 Cookies，带上目标用户网站 Cookies 2：攻击站点无法读写 Cookies 3：最好能阻止第三方使用 Cookies</p><p>安全案例 教务系统开源的 CMS，使用 username 唯一标识，该文章直接暴露了 username；可以使用任意 username 登陆后台</p><p>Cookies 安全策略 1：签名防篡改 2：私有变换（加密） 3：http-only 防止 XSS 4：secure 只有在 https 读取 cookies 5：same-site CSRF 只在 chrome</p><h4 id="四-点击劫持" tabindex="-1">四：点击劫持 <a class="header-anchor" href="#四-点击劫持" aria-label="Permalink to &quot;四：点击劫持&quot;">​</a></h4><p>用户亲手操作 用户不知情 ... 1：js 并不能完全设置点击劫持 if(top.location!=window.location） top.location==window.location iframe 可以设置 sandbox=&quot;allow-forms&quot; 禁止 js 的时候就不管用了</p><p>2：X-FRAME-OPTIONS 禁止内嵌 x-Frame-Options DENY SAMEORING ALLOW_FROM （指定） DENY // 拒绝任何域加载 SAMEORIGIN / / 允许同源域下加载 ALLOW-FROM // 可以定义允许 frame 加载的页面地址:</p><p>3：其他辅助手段</p><h4 id="五-传输协议-http-https" tabindex="-1">五：传输协议 http https <a class="header-anchor" href="#五-传输协议-http-https" aria-label="Permalink to &quot;五：传输协议 http https&quot;">​</a></h4><p>1：http 传输 窃听 篡改</p><p>traceroute www.tooobug.net 【tracert】 anyproxy</p><p>2：运营商劫持 3：公共 wifi 获取密码</p><h4 id="其他安全" tabindex="-1">其他安全 <a class="header-anchor" href="#其他安全" aria-label="Permalink to &quot;其他安全&quot;">​</a></h4><p>拒绝 DOS 服务攻击 1：模拟正常用户 2：大量占用服务器资源 3：无法服务正常用户</p><p>1：TCP 半连接 产生等待 2：HTTP 连接 3：DNS 域名解析服务器 访问负债</p><p>大规模分布式拒绝服务攻击 DDOS 1：流量可达几十到上百 G 2：分布式（肉鸡、代理） 3：极难防御</p><p>DOS 攻击案例 2009 年 5 月 19 号， 全国断网 游戏私服互相 DDOS 换目标，攻击 DNS 服务器 DNS 服务器机器下线 数十万网站 DNS 解析弹框</p><p>1：防火墙，交换机，路由器，流量清洗，高访 IP 2</p><p>1：避免重逻辑业务 2：快速失败快速返回 3：防雪崩机制 4：有损服务 5：CDN</p><p>重放攻击 用户多次消费 登陆态被盗取 多次抽奖 加密 https 时间戳 token nonce 签名</p><p>11： window.opener 安全问题</p><p>window.opener 表示打开当前窗体页面的的父窗体的是谁。例如，在 A 页面中，通过一个带有 target=&quot;_blank&quot; 的 a 标签打开了一个新的页面 B，那么在 B 页面里，window.opener 的值为 A 页面的 window 对象。</p><p>一般来说，打开同源(域名相同)的页面，不会有什么问题。但对于跨域的外部链接来说，存在一个被钓鱼的风险。比如你正在浏览购物网站，从当前网页打开了某个外部链接，在打开的外部页面，可以通过 window.opener.location 改写来源站点的地址。利用这一点，将来源站点改写到钓鱼站点页面上，例如跳转到伪造的高仿购物页面，当再回到购物页面的时候，是很难发现购物网站的地址已经被修改了的，这个时候你的账号就存在被钓鱼的可能了</p><ol><li>设置 rel 属性</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://xxxx&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;noopener noreferrer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; 外链 &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>rel=noopener 规定禁止新页面传递源页面的地址，通过设置了此属性的链接打开的页面，其 window.opener 的值为 null。 2. 将外链替换为内部的跳转连接服务，跳转时先跳到内部地址，再由服务器 redirect 到外链。 3. 可以由 widow.open 打开外链。</p><h1 id="iframe-点击劫持的介绍" tabindex="-1">iframe 点击劫持的介绍 <a class="header-anchor" href="#iframe-点击劫持的介绍" aria-label="Permalink to &quot;iframe 点击劫持的介绍&quot;">​</a></h1><p><a href="https://javascript.info/clickjacking" target="_blank" rel="noreferrer">iframe 点击劫持的介绍</a><a href="https://zh.javascript.info/clickjacking" target="_blank" rel="noreferrer">点击劫持攻击</a></p></div></div></main><footer class="VPDocFooter" data-v-e2ad733b data-v-18bc0180><!--[--><!--]--><div class="edit-info" data-v-18bc0180><div class="edit-link" data-v-18bc0180><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/shaoshaui?tab=repositories" target="_blank" rel="noreferrer" data-v-18bc0180><!--[--><span class="vpi-square-pen edit-link-icon" data-v-18bc0180></span> 在 github 上编辑此页<!--]--></a></div><div class="last-updated" data-v-18bc0180><p class="VPLastUpdated" data-v-18bc0180 data-v-47e3e299>最后更新: <time datetime="2024-07-10T10:01:17.000Z" data-v-47e3e299></time></p></div></div><!----></footer><!--[--><!--[--><!--[--><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-fdc0db66 data-v-729c709f><div class="container" data-v-729c709f><!----><p class="copyright" data-v-729c709f>Copyright © 2022-12 老邵</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"前端_面试题_h5_webview 和原生交互是如何实现的，搭桥的原理.md\":\"DfrdST-T\",\"前端_面试题_http_9.get 和 post 有什么区别.md\":\"Clwo2Gd4\",\"前端_面试题_css_14.css3 属性.md\":\"Calk53rG\",\"前端_面试题_css_10.grid.md\":\"Cz6FOmko\",\"前端_面试题_js_19.js 垃圾回收和 v8 的垃圾回收机制有什么区别.md\":\"BFsnfsXC\",\"前端_面试题_http_14.理想模型.md\":\"aNjxZGKW\",\"前端_面试题_css_13.1px dip dp.md\":\"DUFXyn_2\",\"前端_面试题_http_7.cdn 理解，有 cdn 和没有 cdn 区别.md\":\"C05liUF8\",\"前端_面试题_http_11.谈谈你对 dns-prefetch 的理解.md\":\"Cw39EFHh\",\"前端_面试题_http_8.dns 寻址过程.md\":\"DHn5Ehi6\",\"前端_面试题_css_7.左边定宽度，右边自适应.md\":\"BISVWNYk\",\"前端_面试题_css_17.为什么 marign 0 auto 无法垂直居中.md\":\"BQ1Bd_6G\",\"前端_面试题_css_21.硬件加速.md\":\"Cj_lfDBY\",\"前端_面试题_css_23.inline-block 间隙根本原因.md\":\"8EagFwF2\",\"前端_面试题_http_1.post 和 put 请求有什么区别.md\":\"CL3AKyzI\",\"前端_面试题_css_20.画一个三角形.md\":\"nIf7i2-b\",\"nav_start.md\":\"Cizg3fRB\",\"examples_button.md\":\"DEWZVeru\",\"guide_pdf.md\":\"Dy5qtSm0\",\"index.md\":\"Dk93A2oe\",\"前端_面试题_http_题.md\":\"D7HIDtcz\",\"前端_面试题_js_1._'1'_ '2'_ '3'_.map(parseint) what _ why.md\":\"Tb8OcLd2\",\"前端_面试题_js_17.js 中有哪些方法可以实现继承.md\":\"Bo9sBb2y\",\"前端_面试题_js_18.深拷贝和浅拷贝.md\":\"D0nDp1AE\",\"前端_面试题_js_14.事件循环.md\":\"HylF7eOG\",\"前端_面试题_electron_index.md\":\"pqi7Jb25\",\"前端_面试题_css_2.flex.md\":\"BCKN5b8i\",\"前端_软技能_项目主r全历程总结和反思.md\":\"Kg1pu7Mo\",\"前端_面试题_js_15.实现 reduce foreach_ foreach与for循环，谁的性能更好.md\":\"Dd_pyvTB\",\"前端_面试题_js_35.isnan 和 number.isnan 区别.md\":\"Ck-edzIB\",\"前端_面试题_http_13.content-type.md\":\"CzqTy_rs\",\"前端_面试题_js_32.0.1 _ 0.2 !__ 0.3，如何解决上面说的精确度丢失问题，number 最大数.md\":\"qRYR90Ee\",\"前端_面试题_http_6.http 和 https 的区别.md\":\"JR9MkDTu\",\"前端_面试题_js_40.'use strict' 的作用是什么.md\":\"XIv9oeN-\",\"前端_面试题_http_2.http 缓存原理，前端缓存了解哪些，网络缓存和前端缓存如何交互，协商缓存浏览器如何判断.md\":\"fHAlEXPb\",\"前端_面试题_js_13.js 中通过 _bind_ 绑定的方法，再使用 _apply_ 或 _call_ 会改变它的 _this_ 吗.md\":\"BLbEte1D\",\"前端_面试题_http_4.三次握手，四次挥手，为什么挥手不能用三次.md\":\"CL4e9hpM\",\"前端_面试题_js_9.typeof、数据类型、instanceof、手写 instanceof.md\":\"DVADwakB\",\"前端_面试题_js_3.map，foreach 的区别.md\":\"H2SBMSxi\",\"前端_面试题_js_30.箭头函数于普通函数区别.md\":\"DYIyfVlT\",\"前端_面试题_js_31.柯里化.md\":\"DKQfBltJ\",\"前端_面试题_http_5.http1 和 http2 的区别， http2 做了那些改进，有哪些不足，http3 做了那些改进.md\":\"BB0FlTq_\",\"前端_面试题_js_5.引用类型怎么存储，js 中的堆和栈有什么区别.md\":\"DYrBaGYD\",\"前端_面试题_css_15.css 中的 px，rem，em，vw，vh.md\":\"nN0ufnjy\",\"前端_面试题_http_http.md\":\"CvTME2C-\",\"前端_面试题_js_38.位运算.md\":\"DeOOVRdE\",\"前端_面试题_js_37.正则.md\":\"oVY3mCnM\",\"前端_面试题_js_41.如何判断是 new 还是函数调用.md\":\"CqbIyl8_\",\"前端_面试题_css_3.position.md\":\"DhI5PWei\",\"前端_面试题_js_12.事件机制捕获、冒泡.md\":\"DO7LYy8_\",\"前端_面试题_js_29.模块化.md\":\"B0BwOfid\",\"前端_面试题_js_28._____.md\":\"DxwHwGyk\",\"前端_面试题_js_20.设计模式了解应用_发布订阅模式_单例模式.md\":\"DuVr4iD5\",\"前端_面试题_css_6.bfc.md\":\"DIWrSkY3\",\"前端_面试题_js_4.symbol 是否可以遍历.md\":\"CJH-3lay\",\"前端_面试题_js_8.闭包.md\":\"YSNshkJy\",\"前端_面试题_js_7.object.prototype.tostring 返回什么.md\":\"CWFyXVn2\",\"前端_面试题_vue_10.compiler diff 原理.md\":\"DwYQdy8c\",\"前端_面试题_webpack_10.热更新 hmr.md\":\"DvriycPR\",\"前端_面试题_ts_extrace.md\":\"DTJmtrY6\",\"前端_面试题_js_函数_eval.md\":\"DF3YaOJL\",\"前端_面试题_npm_index.md\":\"DlySdV3z\",\"前端_面试题_css_24.font-display 控制字体加载和替换.md\":\"C96qa-Pj\",\"前端_面试题_算法_二叉树_index.md\":\"D5T3dyA0\",\"前端_面试题_算法_总结.md\":\"CCO3thYC\",\"前端_面试题_题目.md\":\"DA_Cfm7z\",\"前端_面试题_js_6.slice，splice，区别，是否改变数组.md\":\"BMeEmNVD\",\"前端_面试题_vue_2.vue数组是否响应.md\":\"DHY9dGER\",\"前端_面试题_vue_1.vue响应式原理.md\":\"-_Uy25Ib\",\"前端_面试题_vue_3.虚拟 dom.md\":\"D-un5mJZ\",\"前端_面试题_vue_11.依赖收集.md\":\"CgPY02AH\",\"前端_面试题_vue_11.vue-router.md\":\"BLkgycFt\",\"前端_面试题_vue_5.vue 组件如何通讯.md\":\"BuIzyoR9\",\"前端_面试题_vue_8.自定义指令.md\":\"DTAFFbT7\",\"前端_面试题_js_34.a___1__a___2__a___3 为 true.md\":\"CR8r0TbF\",\"前端_面试题_vue_区别_vue2 和 vue3 区别.md\":\"C1x-SvoU\",\"前端_面试题_vue_vue3_index.md\":\"DSIeduFu\",\"前端_面试题_http_12.tcp 滑动窗口、重试机制.md\":\"BDTFbF14\",\"前端_面试题_js_10.什么是面向对象.md\":\"DIHNXEh2\",\"前端_面试题_js_36.随机数.md\":\"CyglcRzD\",\"前端_面试题_webpack_3.source map 怎么用.md\":\"DmTXc6pg\",\"成长_反思_专一.md\":\"DgiKUiN6\",\"前端_面试题_vue_4.全局注册组件vue use 干了什么.md\":\"DmtEghRs\",\"前端_面试题_webpack_4.如何实现一个 plugin 插件.md\":\"BbJL4TMn\",\"前端_面试题_webpack_5.webpack 构建过程.md\":\"DvLIgM58\",\"前端_面试题_css_8.高度已知，请写出三栏布局，左右栏宽度为300px_中间自适应.md\":\"rSZQJMUT\",\"成长_反思_恒.md\":\"orqb-sPA\",\"成长_思维_本能.md\":\"ECSLNClC\",\"前端_面试题_浏览器_7.webp.md\":\"N8Eb_Qav\",\"前端_面试题_手写_index.md\":\"CeJ290fv\",\"前端_面试题_手写_12.compose-版本.md\":\"CmQBRzea\",\"前端_面试题_js_22.不用 promise_ 那些可实现 promise generator.md\":\"tEnJgAX9\",\"前端_面试题_css_18.z-index.md\":\"BmO_bGLv\",\"前端_面试题_css_9.css 的 transform 和 animation 区别.md\":\"CTNZNi0g\",\"site_framework.md\":\"CNClYkdI\",\"前端_面试题_css_5.回流和重绘.md\":\"Wg08272J\",\"前端_面试题_css_4.display none opacity_ 0 visibility_hidden.md\":\"DyhTX5Fa\",\"前端_面试题_css_11.css 中的 scope 为什么可以实现局部作用.md\":\"BeOG8YR_\",\"前端_面试题_css_16.伪元素 __before 与伪类 _first-child 的区别.md\":\"BDIkjsoq\",\"me_index.md\":\"CTXRKjdC\",\"前端_软技能_团队分享必要性.md\":\"B6DH7-KD\",\"前端_面试题_css_基础.md\":\"BuvRFKdb\",\"前端_面试题_js_26.new 操作符_ 构造函数和普通函数区别_ 函数有 return 返回什么.md\":\"Bo8TuiMF\",\"前端_面试题_vue_7.vuex 的数据流 核心原理是什么.md\":\"BZ9Mz2Gk\",\"前端_软技能_我经常做的技术思考话题.md\":\"D4Q5D82k\",\"前端_面试题_http_3.说几个缓存相关的 http 状态码， 301 和 302 区别，浏览器接收到 301 302 如何处理.md\":\"BNQe3rpB\",\"前端_面试题_js_11.es6 上数组上扩展了哪些方法.md\":\"D3PoQTlN\",\"前端_面试题_js_39.进程通信的几种方式.md\":\"Bd1Qk1PH\",\"前端_面试题_css_22.选择优先级.md\":\"CQQKULVM\",\"前端_面试题_js_27.什么是作用域链、执行上下文、词法环境.md\":\"C5SYhRHJ\",\"前端_面试题_js_33.raf 和 ric 是什么.md\":\"C5tbNtlf\",\"前端_面试题_http_10.tcp 和 udp 区别是什么.md\":\"D24pnnIq\",\"前端_面试题_js_23.promise原理、方法.md\":\"DITX6nYs\",\"前端_面试题_js_24.为什么原生的 form 表单提交没有跨域问题（form 请求和 ajax 请求有什么不同).md\":\"BDlfF-fX\",\"前端_面试题_css_6.bfc 应用、盒子模型.md\":\"Djq4WWQX\",\"前端_面试题_css_1.两种以上方式实现已知或者未知宽度的垂直水平居中.md\":\"DxzfuuNw\",\"前端_面试题_js_25.防抖节流.md\":\"D0NRjVah\",\"前端_面试题_webpack_vite.v.md\":\"DIsZR-XG\",\"前端_面试题_webpack_9.webpack 的 tree shaking 是怎么实现的.md\":\"ftYVtDLe\",\"前端_面试题_http_15.心跳机制.md\":\"Cmw3vN1f\",\"前端_面试题_js_2._for...in_ 和 _for...of_ 的区别.md\":\"DD4uzWZY\",\"前端_面试题_浏览器_3.安全.md\":\"D5p-V7S8\",\"前端_面试题_浏览器_4.输入url到看到页面发生了什么.md\":\"DRiCPrAq\",\"前端_面试题_webpack_6.webpack 构建优化、前端性能优化.md\":\"_5-c_HL9\",\"前端_面试题_浏览器_1.浏览器进程，渲染进程，渲染流程.md\":\"BHv5d7vi\",\"前端_面试题_浏览器_5.跨域.md\":\"76gd-qKD\",\"前端_面试题_浏览器_6.onload 和 domcontentloaded 的区别.md\":\"B32RVMWF\",\"前端_面试题_浏览器_2.说说 script 标签中的 defer 和 async 异同点.md\":\"D-7DNdmB\",\"前端_面试题_js_16.es6 中 reflect 对象，它什么优点.md\":\"BdIwgyLJ\",\"前端_面试题_算法_链表_index.md\":\"f7EO8dQx\",\"前端_面试题_项目_微前端.md\":\"BwAr6zMF\",\"成长_书籍_社科_远见.md\":\"DiF-6yzQ\",\"成长_书籍_哲学_道德经.md\":\"CwpbqJtT\",\"成长_书籍_人物传记_曾国藩家书.md\":\"B4E5f9pH\",\"成长_反思_谦虚.md\":\"BXi-nLDz\",\"成长_书籍_认知与行为_原则.md\":\"CLGbR5Zc\",\"成长_书籍_认知与行为_认知觉醒.md\":\"BGoy9dmn\",\"成长_书籍_心理_被讨厌的勇气 .md\":\"kkddKIrV\",\"成长_思维_如何有主见.md\":\"wbeU1ygz\",\"成长_书籍_故事_一尊佛像.md\":\"uXkgerpI\",\"成长_思维_已终为始.md\":\"XS3SwUSW\",\"成长_书籍_社科_跃进.md\":\"D27NK4_J\",\"成长_思维_双向门.md\":\"CiDkZDUx\",\"成长_思维_反脆弱.md\":\"CIhQKbjg\",\"成长_反思_刚柔.md\":\"0fWkdZoM\",\"成长_思维_安全感.md\":\"QSSaRtXQ\",\"成长_思维_改变.md\":\"BNThPGd7\",\"成长_思维_注射式洗脑.md\":\"V34-QGBr\",\"成长_思维_建立自信.md\":\"CC6GB62T\",\"成长_思维_独立思考.md\":\"BrYx-c-D\",\"成长_思维_窄门思维.md\":\"BI8DGb9A\",\"成长_反思_戒骄堕.md\":\"BRVNW9KD\",\"成长_规律_index.md\":\"DsZYyi5C\",\"前端_面试题_vue_9.minxins.md\":\"DzbIOLmf\",\"前端_面试题_js_21.ajax fetch axios 区别，ajax 实现原理_ axios 原理是什么.md\":\"CJB1KVah\",\"成长_思维_聚焦思维.md\":\"CB-nvoMK\",\"成长_反思_自省.md\":\"CAVJIVsV\",\"前端_面试题_css_19.元素替换.md\":\"Dn0HUIhV\",\"成长_思维_金字塔思维.md\":\"Dj4HqWQM\",\"前端_面试题_vue_6.reactive ref 区别.md\":\"-ascyZZs\",\"成长_书籍_认知与行为_请停止无效努力.md\":\"BQfl-CpD\",\"成长_反思_读书不强记.md\":\"Cs4_EZP6\",\"前端_面试题_webpack_1.webpack 中 loader 和 plugin 的区别.md\":\"BMOksoX5\",\"成长_书籍_认知与行为_精进.md\":\"DOA5-Y_D\",\"前端_面试题_webpack_7.loader 执行顺序.md\":\"BTslWFKW\",\"成长_思维_长期主义思维.md\":\"Xev9TJX6\",\"前端_面试题_webpack_11.讲一下 rollup 和 webpack 的区别.md\":\"pr6373zI\",\"前端_面试题_webpack_2.webpack 的三种 hash、chunkhash、contenthash 有什么区别.md\":\"BKWE7xlG\",\"前端_面试题_webpack_8.webpack 分包加载用的是哪个，分包的原理？.md\":\"C0khqNzk\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"一叶知秋的博客\",\"description\":\"山不向我走来，我便向他走去。前端开发为主的博客网站。\",\"base\":\"/ss/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/ss/logo.png\",\"siteTitle\":false,\"nav\":[{\"text\":\"导航\",\"link\":\"/site/framework\"},{\"text\":\"前端\",\"items\":[{\"text\":\"软技能\",\"link\":\"/前端/软技能/项目主R全历程总结和反思\"},{\"text\":\"面试题\",\"link\":\"/前端/面试题/题目\"}]},{\"text\":\"成长\",\"items\":[{\"text\":\"书籍\",\"link\":\"/成长/书籍/人物传记/曾国藩家书\"},{\"text\":\"规律\",\"link\":\"/成长/规律/index\"},{\"text\":\"反思\",\"link\":\"/成长/反思/恒\"},{\"text\":\"思维\",\"link\":\"/成长/思维/独立思考\"}]},{\"text\":\"我的简历\",\"link\":\"/guide/pdf\"},{\"text\":\"我的掘金\",\"link\":\"https://juejin.cn/user/2418581313700014/posts\"},{\"text\":\"技术博客\",\"link\":\"https://www.yuque.com/qifengle-4eyb1/lmp4mm\"},{\"text\":\"我的工具\",\"items\":[{\"text\":\"图片压缩\",\"link\":\"https://tinypng.com/\"},{\"text\":\"网盘资源搜索\",\"link\":\"https://www.chaonengso.com/\"},{\"text\":\"文件格式转换\",\"link\":\"https://pdftoword.55.la/imgcompress/\"}]},{\"text\":\"关于\",\"link\":\"/me/\"}],\"outlineTitle\":\"本页目录\",\"editLink\":{\"pattern\":\"https://github.com/shaoshaui?tab=repositories\",\"text\":\"在 github 上编辑此页\"},\"footer\":{\"copyright\":\"Copyright © 2022-12 老邵\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/shaoshaui?tab=repositories\"}],\"algolia\":{\"apiKey\":\"your_api_key\",\"indexName\":\"index_name\"},\"lastUpdatedText\":\"最后更新\",\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>